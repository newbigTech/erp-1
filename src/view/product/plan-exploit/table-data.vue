<template>
    <div class="c-table-data">
        <el-table class="scroll-bar" v-resize="{height:41}" border
                  v-loading="loading" element-loading-text="玩命加载中..."
                  :data="tableData.lists" highlight-current-row>
            <el-table-column type="selection"></el-table-column>
            <el-table-column
                    inline-template
                    label="流程编号">
                  <span>
                    {{row.code}}
                  </span>
            </el-table-column>
            <el-table-column
                    inline-template
                    width="300"
                    label="产品名称">
        <span>
           <ui-tip :content="row.title" :width="98"></ui-tip>
          </span>
            </el-table-column>
            <el-table-column
                    inline-template
                    label="分类">
                <span>
                    {{row.category}}
                </span>
            </el-table-column>
            <el-table-column
                    inline-template
                    label="审核人">
        <span v-copy>
            {{row.operator}}
          </span>
            </el-table-column>
            <el-table-column
                    inline-template
                    label="申请人">
        <span v-copy>
            {{row.creator}}
          </span>
            </el-table-column>
            <el-table-column
                    inline-template
                    label="申请时间">
        <span>
            {{row.create_time}}
          </span>
            </el-table-column>
            <el-table-column
                    inline-template
                    label="状态">
        <span>
            {{row.process}}
          </span>
            </el-table-column>
            <el-table-column
                    label="操作">
                <template slot-scope="scope">
                    <el-button type="text" size="mini"
                               @click="read_goods(scope.row)">查看</el-button>
                    <span v-if="scope.row.is_edit">|</span>
                    <el-button v-if="scope.row.is_edit"
                               type="text" size="mini"
                               @click="edit(scope.row)">编辑</el-button>
                    <span v-if="!scope.row.is_complete && !(scope.row.process_id===-1)">|</span>
                    <el-button v-if="!scope.row.is_complete && !(scope.row.process_id===-1)"
                               type="text" size="mini"
                               @click="dispose_goods(scope.row)">处理</el-button>
                </template>
            </el-table-column>
        </el-table>
        <el-pagination
                class="page-fixed"
                @size-change="size_change"
                @current-change="current_change"
                :current-page=tableData.page
                :page-size=tableData.pageSize
                :total=tableData.count
                layout="total, sizes, prev, pager, next, jumper"
                :page-sizes="[20, 50,100, 200, 500]">
        </el-pagination>
    </div>
</template>
<style lang="stylus">

</style>
<script>

    export default{
        data(){
            return{

            }
        },
        methods:{
            read_goods(row){
                this.$emit('read-goods',row);
            },
            edit(row){
                this.$emit('edit',row);
            },
            dispose_goods(row){
                this.$emit('dispose-goods',row);
            },
            size_change(size){
                this.$emit('size-change',size);
            },
            current_change(page){
                this.$emit('current-change',page);
            },
        },
        props:{
            tableData:{},
            loading:{}
        },
        components:{
            uiTip: require("@/components/ui-tip.vue").default,
        }
    }
</script>